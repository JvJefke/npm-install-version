{"version":3,"sources":["../../src/test/installSync.js"],"names":["fs","require","test","niv","clean","installSync","packageJson","readFileSync","t","equal","JSON","parse","version","end","destination","packageJson1","packageJson2","overwrite"],"mappings":"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","file":"installSync.js","sourcesContent":["const fs = require('fs');\nconst test = require('tape');\n\nconst niv = require('../index.js');\nconst { clean } = require('./test-util.js');\n\ntest('niv.installSync normal', t => {\n  clean();\n  niv.installSync('csjs@1.0.0');\n  const packageJson = fs.readFileSync('niv_modules/csjs@1.0.0/package.json');\n  t.equal(JSON.parse(packageJson).version, '1.0.0');\n  t.end();\n});\n\ntest('niv.installSync remote', t => {\n  clean();\n  niv.installSync('scott113341/csjs#extract-extends-performance');\n  const packageJson = fs.readFileSync('niv_modules/scott113341-csjs#extract-extends-performance/package.json');\n  t.equal(JSON.parse(packageJson).version, '1.0.4');\n  t.end();\n});\n\ntest('niv.installSync scoped', t => {\n  clean();\n  niv.installSync('@scott113341/niv-scoped-test@1.0.0');\n  const packageJson = fs.readFileSync('niv_modules/@scott113341-niv-scoped-test@1.0.0/package.json');\n  t.equal(JSON.parse(packageJson).version, '1.0.0');\n  t.end();\n});\n\ntest('niv.installSync w/ dependencies', t => {\n  clean();\n  niv.installSync('push-dir@0.2.2');\n  const packageJson = fs.readFileSync('niv_modules/push-dir@0.2.2/package.json');\n  t.equal(JSON.parse(packageJson).version, '0.2.2');\n  t.end();\n});\n\ntest('niv.installSync w/ destination', t => {\n  clean();\n  niv.installSync('csjs@1.0.0', { destination: 'csjs@yolo' });\n  const packageJson = fs.readFileSync('niv_modules/csjs@yolo/package.json');\n  t.equal(JSON.parse(packageJson).version, '1.0.0');\n  t.end();\n});\n\ntest('niv.installSync w/o overwrite', t => {\n  clean();\n  niv.installSync('csjs@1.0.0', { destination: 'csjs@yolo' });\n  const packageJson1 = fs.readFileSync('niv_modules/csjs@yolo/package.json');\n  t.equal(JSON.parse(packageJson1).version, '1.0.0');\n\n  niv.installSync('csjs@1.0.1', { destination: 'csjs@yolo' });\n  const packageJson2 = fs.readFileSync('niv_modules/csjs@yolo/package.json');\n  t.equal(JSON.parse(packageJson2).version, '1.0.0');\n\n  t.end();\n});\n\ntest('niv.installSync w/ overwrite', t => {\n  clean();\n  niv.installSync('csjs@1.0.0', { destination: 'csjs@yolo' });\n  const packageJson1 = fs.readFileSync('niv_modules/csjs@yolo/package.json');\n  t.equal(JSON.parse(packageJson1).version, '1.0.0');\n\n  niv.installSync('csjs@1.0.1', { destination: 'csjs@yolo', overwrite: true });\n  const packageJson2 = fs.readFileSync('niv_modules/csjs@yolo/package.json');\n  t.equal(JSON.parse(packageJson2).version, '1.0.1');\n\n  t.end();\n});\n"]}