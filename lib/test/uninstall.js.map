{"version":3,"sources":["../../src/test/uninstall.js"],"names":["test","require","fs","niv","clean","tryCatchOptimizer","install","csjs","t","assert","uninstall","throws","readFileSync","bind","end","pkg","addNumbers","destination"],"mappings":";;;;AAAA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;AACA,IAAMC,KAAKD,QAAQ,IAAR,CAAX;;AAEA,IAAME,MAAMF,QAAQ,aAAR,CAAZ;;eACqCA,QAAQ,gBAAR,C;IAA7BG,K,YAAAA,K;IAAOC,iB,YAAAA,iB;;AAEfL,KAAK,sBAAL,EAA6B,aAAK;AAChCI;AACAD,MAAIG,OAAJ,CAAY,YAAZ;AACA,MAAMC,OAAOJ,IAAIF,OAAJ,CAAY,YAAZ,CAAb;AACAO,IAAEC,MAAF,QAAgBF,IAAhB,yCAAgBA,IAAhB,GAAsB,UAAtB;AACAJ,MAAIO,SAAJ,CAAc,YAAd;AACAF,IAAEG,MAAF,CAAST,GAAGU,YAAH,CAAgBC,IAAhB,YAA2B,oCAA3B,CAAT,EAA2E,QAA3E,EAAqF,4BAArF;AACAL,IAAEM,GAAF;AACD,CARD;;AAUAd,KAAK,sBAAL,EAA6B,aAAK;AAChCI;AACAD,MAAIG,OAAJ,CAAY,8CAAZ;AACA,MAAMC,OAAOJ,IAAIF,OAAJ,CAAY,8CAAZ,CAAb;AACAO,IAAEC,MAAF,QAAgBF,IAAhB,yCAAgBA,IAAhB,GAAsB,UAAtB;AACAJ,MAAIO,SAAJ,CAAc,8CAAd;AACAF,IAAEG,MAAF,CAAST,GAAGU,YAAH,CAAgBC,IAAhB,YAA2B,8CAA3B,CAAT,EAAqF,QAArF,EAA+F,4BAA/F;AACAL,IAAEM,GAAF;AACD,CARD;;AAUAd,KAAK,sBAAL,EAA6B,aAAK;AAChCI;AACAD,MAAIG,OAAJ,CAAY,oCAAZ;AACA,MAAMS,MAAMZ,IAAIF,OAAJ,CAAY,oCAAZ,CAAZ;AACAO,IAAEC,MAAF,SAAgBM,IAAIC,UAApB,GAAgC,UAAhC;AACAb,MAAIO,SAAJ,CAAc,oCAAd;AACAF,IAAEG,MAAF,CAAST,GAAGU,YAAH,CAAgBC,IAAhB,YAA2B,oCAA3B,CAAT,EAA2E,QAA3E,EAAqF,4BAArF;AACAL,IAAEM,GAAF;AACD,CARD;;AAUAd,KAAK,8BAAL,EAAqC,aAAK;AACxCI;AACAD,MAAIG,OAAJ,CAAY,8CAAZ,EAA4D,EAAEW,aAAa,WAAf,EAA5D;AACA,MAAMV,OAAOJ,IAAIF,OAAJ,CAAY,WAAZ,CAAb;AACAO,IAAEC,MAAF,QAAgBF,IAAhB,yCAAgBA,IAAhB,GAAsB,UAAtB;AACAJ,MAAIO,SAAJ,CAAc,WAAd;AACAF,IAAEG,MAAF,CAAST,GAAGU,YAAH,CAAgBC,IAAhB,YAA2B,WAA3B,CAAT,EAAkD,QAAlD,EAA4D,4BAA5D;AACAL,IAAEM,GAAF;AACD,CARD","file":"uninstall.js","sourcesContent":["const test = require('tape');\nconst fs = require(\"fs\");\n\nconst niv = require('../index.js');\nconst { clean, tryCatchOptimizer } = require('./test-util.js');\n\ntest('niv.uninstall normal', t => {\n  clean();\n  niv.install('csjs@1.0.0');\n  const csjs = niv.require('csjs@1.0.0');\n  t.assert(typeof csjs, 'function');\n  niv.uninstall('csjs@1.0.0');\n  t.throws(fs.readFileSync.bind(this, 'niv_modules/csjs@yolo/package.json'), /ENOENT/, \"Should throw ENOENT error.\");\n  t.end();\n});\n\ntest('niv.uninstall remote', t => {\n  clean();\n  niv.install('scott113341/csjs#extract-extends-performance');\n  const csjs = niv.require('scott113341/csjs#extract-extends-performance');\n  t.assert(typeof csjs, 'function');\n  niv.uninstall('scott113341/csjs#extract-extends-performance');\n  t.throws(fs.readFileSync.bind(this, 'scott113341/csjs#extract-extends-performance'), /ENOENT/, \"Should throw ENOENT error.\");\n  t.end();\n});\n\ntest('niv.uninstall scoped', t => {\n  clean();\n  niv.install('@scott113341/niv-scoped-test@1.0.0');\n  const pkg = niv.require('@scott113341/niv-scoped-test@1.0.0');\n  t.assert(typeof pkg.addNumbers, 'function');\n  niv.uninstall('@scott113341/niv-scoped-test@1.0.0');\n  t.throws(fs.readFileSync.bind(this, '@scott113341/niv-scoped-test@1.0.0'), /ENOENT/, \"Should throw ENOENT error.\");\n  t.end();\n});\n\ntest('niv.uninstall w/ destination', t => {\n  clean();\n  niv.install('scott113341/csjs#extract-extends-performance', { destination: 'csjs@yolo' });\n  const csjs = niv.require('csjs@yolo');\n  t.assert(typeof csjs, 'function');\n  niv.uninstall('csjs@yolo');\n  t.throws(fs.readFileSync.bind(this, 'csjs@yolo'), /ENOENT/, \"Should throw ENOENT error.\");\n  t.end();\n});\n"]}