{"version":3,"sources":["../../src/test/uninstall.js"],"names":["test","require","fs","niv","clean","tryCatchOptimizer","install","then","csjs","t","assert","uninstall","throws","readFileSync","bind","end","err","pkg","addNumbers","destination"],"mappings":";;;;AAAA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;AACA,IAAMC,KAAKD,QAAQ,IAAR,CAAX;;AAEA,IAAME,MAAMF,QAAQ,aAAR,CAAZ;;eACqCA,QAAQ,gBAAR,C;IAA7BG,K,YAAAA,K;IAAOC,iB,YAAAA,iB;;AAEfL,KAAK,sBAAL,EAA6B,aAAK;AAChCI;AACAD,MAAIG,OAAJ,CAAY,YAAZ,EAA0BC,IAA1B,CAA+B,YAAM;AACnC,QAAMC,OAAOL,IAAIF,OAAJ,CAAY,YAAZ,CAAb;AACAQ,MAAEC,MAAF,QAAgBF,IAAhB,yCAAgBA,IAAhB,GAAsB,UAAtB;AACAL,QAAIQ,SAAJ,CAAc,YAAd;AACAF,MAAEG,MAAF,CAASV,GAAGW,YAAH,CAAgBC,IAAhB,YAA2B,oCAA3B,CAAT,EAA2E,QAA3E,EAAqF,4BAArF;AACAL,MAAEM,GAAF;AACD,GAND,EAMG;AAAA,WAAON,EAAEM,GAAF,CAAMC,GAAN,CAAP;AAAA,GANH;AAOD,CATD;;AAWAhB,KAAK,sBAAL,EAA6B,aAAK;AAChCI;AACAD,MAAIG,OAAJ,CAAY,8CAAZ,EAA4DC,IAA5D,CAAiE,YAAM;AACrE,QAAMC,OAAOL,IAAIF,OAAJ,CAAY,8CAAZ,CAAb;AACAQ,MAAEC,MAAF,QAAgBF,IAAhB,yCAAgBA,IAAhB,GAAsB,UAAtB;AACAL,QAAIQ,SAAJ,CAAc,8CAAd;AACAF,MAAEG,MAAF,CAASV,GAAGW,YAAH,CAAgBC,IAAhB,YAA2B,8CAA3B,CAAT,EAAqF,QAArF,EAA+F,4BAA/F;AACAL,MAAEM,GAAF;AACD,GAND,EAMG;AAAA,WAAON,EAAEM,GAAF,CAAMC,GAAN,CAAP;AAAA,GANH;AAOD,CATD;;AAWAhB,KAAK,sBAAL,EAA6B,aAAK;AAChCI;AACAD,MAAIG,OAAJ,CAAY,oCAAZ,EAAkDC,IAAlD,CAAuD,YAAM;AAC3D,QAAMU,MAAMd,IAAIF,OAAJ,CAAY,oCAAZ,CAAZ;AACAQ,MAAEC,MAAF,SAAgBO,IAAIC,UAApB,GAAgC,UAAhC;AACAf,QAAIQ,SAAJ,CAAc,oCAAd;AACAF,MAAEG,MAAF,CAASV,GAAGW,YAAH,CAAgBC,IAAhB,YAA2B,oCAA3B,CAAT,EAA2E,QAA3E,EAAqF,4BAArF;AACAL,MAAEM,GAAF;AACD,GAND,EAMG;AAAA,WAAON,EAAEM,GAAF,CAAMC,GAAN,CAAP;AAAA,GANH;AAOD,CATD;;AAWAhB,KAAK,8BAAL,EAAqC,aAAK;AACxCI;AACAD,MAAIG,OAAJ,CAAY,8CAAZ,EAA4D,EAAEa,aAAa,WAAf,EAA5D,EAA0FZ,IAA1F,CAA+F,YAAM;AACnG,QAAMC,OAAOL,IAAIF,OAAJ,CAAY,WAAZ,CAAb;AACAQ,MAAEC,MAAF,QAAgBF,IAAhB,yCAAgBA,IAAhB,GAAsB,UAAtB;AACAL,QAAIQ,SAAJ,CAAc,WAAd;AACAF,MAAEG,MAAF,CAASV,GAAGW,YAAH,CAAgBC,IAAhB,YAA2B,WAA3B,CAAT,EAAkD,QAAlD,EAA4D,4BAA5D;AACAL,MAAEM,GAAF;AACD,GAND,EAMG;AAAA,WAAON,EAAEM,GAAF,CAAMC,GAAN,CAAP;AAAA,GANH;AAOD,CATD","file":"uninstall.js","sourcesContent":["const test = require('tape');\nconst fs = require(\"fs\");\n\nconst niv = require('../index.js');\nconst { clean, tryCatchOptimizer } = require('./test-util.js');\n\ntest('niv.uninstall normal', t => {\n  clean();\n  niv.install('csjs@1.0.0').then(() => {\n    const csjs = niv.require('csjs@1.0.0');\n    t.assert(typeof csjs, 'function');\n    niv.uninstall('csjs@1.0.0');\n    t.throws(fs.readFileSync.bind(this, 'niv_modules/csjs@yolo/package.json'), /ENOENT/, \"Should throw ENOENT error.\");\n    t.end();\n  }, err => t.end(err));\n});\n\ntest('niv.uninstall remote', t => {\n  clean();\n  niv.install('scott113341/csjs#extract-extends-performance').then(() => {\n    const csjs = niv.require('scott113341/csjs#extract-extends-performance');\n    t.assert(typeof csjs, 'function');\n    niv.uninstall('scott113341/csjs#extract-extends-performance');\n    t.throws(fs.readFileSync.bind(this, 'scott113341/csjs#extract-extends-performance'), /ENOENT/, \"Should throw ENOENT error.\");\n    t.end();\n  }, err => t.end(err));\n});\n\ntest('niv.uninstall scoped', t => {\n  clean();\n  niv.install('@scott113341/niv-scoped-test@1.0.0').then(() => {\n    const pkg = niv.require('@scott113341/niv-scoped-test@1.0.0');\n    t.assert(typeof pkg.addNumbers, 'function');\n    niv.uninstall('@scott113341/niv-scoped-test@1.0.0');\n    t.throws(fs.readFileSync.bind(this, '@scott113341/niv-scoped-test@1.0.0'), /ENOENT/, \"Should throw ENOENT error.\");\n    t.end();\n  }, err => t.end(err));\n});\n\ntest('niv.uninstall w/ destination', t => {\n  clean();\n  niv.install('scott113341/csjs#extract-extends-performance', { destination: 'csjs@yolo' }).then(() => {\n    const csjs = niv.require('csjs@yolo');\n    t.assert(typeof csjs, 'function');\n    niv.uninstall('csjs@yolo');\n    t.throws(fs.readFileSync.bind(this, 'csjs@yolo'), /ENOENT/, \"Should throw ENOENT error.\");\n    t.end();\n  }, err => t.end(err));\n});\n"]}